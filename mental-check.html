<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiểm tra tâm trạng - Mindspace</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* Page-specific styles */
        .test-section {
            padding: 2rem;
            background-color: var(--light-bg);
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .test-intro {
            text-align: center;
            margin-bottom: 2rem;
        }

        .test-form {
            max-width: 800px;
            margin: 0 auto;
        }

        .question {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .question h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .options {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .option {
            flex: 1;
            min-width: 120px;
            padding: 1rem;
            background-color: rgba(108, 99, 255, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .option:hover {
            background-color: rgba(108, 99, 255, 0.1);
        }

        .option.selected {
            background-color: var(--primary-color);
            color: white;
        }

        .submit-btn {
            display: block;
            margin: 2rem auto 0;
            padding: 1rem 2rem;
        }

        .results {
            display: none;
            padding: 2rem;
            background-color: var(--light-bg);
            border-radius: 12px;
            margin-top: 2rem;
            box-shadow: var(--shadow);
        }

        .result-summary {
            text-align: center;
            margin-bottom: 2rem;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .result-card {
            background-color: var(--background-color);
            padding: 1.5rem;
            border-radius: 8px;
        }

        .result-card h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .result-card h3 i {
            margin-right: 0.5rem;
        }

        .resource-suggestions {
            margin-top: 2rem;
        }

        .resource-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .resource-item {
            background-color: var(--background-color);
            padding: 1.5rem;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
        }

        .resource-item h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .resource-item p {
            color: var(--light-text);
            margin-bottom: 1rem;
            flex-grow: 1;
        }

        .test-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .test-tab {
            padding: 1rem 2rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            font-weight: 600;
        }

        .test-tab.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }

        .test-content {
            display: none;
        }

        .test-content.active {
            display: block;
        }

        /* Progress bar */
        .progress-container {
            width: 100%;
            height: 8px;
            background-color: var(--background-color);
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>Mindspace</h2>
                <button id="menu-toggle" class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="../index.html"><i class="fas fa-home"></i> Trang chủ (Home)</a>
                    </li>
                    <li class="has-submenu active">
                        <a href="mental-check.html"><i class="fas fa-brain"></i> Kiểm tra tâm trạng (Mental Check-in)</a>
                        <ul class="submenu">
                            <li><a href="#stress-test">Bài test stress</a></li>
                            <li><a href="#anxiety-test">Bài test lo âu</a></li>
                            <li><a href="#results">Kết quả + Gợi ý tài nguyên</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="confession.html"><i class="fas fa-comments"></i> Góc chia sẻ (Confession Box)</a>
                        <ul class="submenu">
                            <li><a href="confession.html#form">Form gửi chia sẻ ẩn danh</a></li>
                            <li><a href="confession.html#stories">Danh sách bài chia sẻ công khai</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="experts.html"><i class="fas fa-user-md"></i> Góc chuyên gia (Expert's Corner)</a>
                        <ul class="submenu">
                            <li><a href="experts.html#intro">Giới thiệu chuyên gia/admin tư vấn</a></li>
                            <li><a href="experts.html#articles">Các bài viết phân tích tâm lý</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="resources.html"><i class="fas fa-book-open"></i> Thư viện tài nguyên (Articles & Tips)</a>
                        <ul class="submenu">
                            <li><a href="resources.html#tips">Mẹo thư giãn</a></li>
                            <li><a href="resources.html#maintain">Duy trì tâm lực</a></li>
                            <li><a href="resources.html#stories">Câu chuyện truyền cảm hứng</a></li>
                            <li><a href="resources.html#media">Infographic / Podcast (nếu có)</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="chatbot.html"><i class="fas fa-robot"></i> Chatbot hỗ trợ (Chatbox)</a>
                        <ul class="submenu">
                            <li><a href="chatbot.html#chat">Trò chuyện với Mindbot</a></li>
                            <li><a href="chatbot.html#suggest">Gợi ý nội dung theo tình huống</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu">
                        <a href="contact.html"><i class="fas fa-envelope"></i> Liên hệ & hỗ trợ (Contact)</a>
                        <ul class="submenu">
                            <li><a href="contact.html#hotline">Hotline / email</a></li>
                            <li><a href="contact.html#form">Trung tâm tư vấn để xuất</a></li>
                            <li><a href="contact.html#social">Mạng xã hội</a></li>
                        </ul>
                    </li>
                    <li class="has-submenu admin-link">
                        <a href="admin.html"><i class="fas fa-lock"></i> Admin Dashboard</a>
                        <ul class="submenu">
                            <li><a href="admin.html#confessions">Quản lý bài chia sẻ</a></li>
                            <li><a href="admin.html#stats">Thống kê test tâm trạng</a></li>
                            <li><a href="admin.html#users">Quản lý người dùng/chatbot</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="page-header">
                <h1>Kiểm tra tâm trạng</h1>
                <p>Hãy dành vài phút để đánh giá trạng thái tinh thần hiện tại của bạn</p>
            </header>

            <section class="test-section">
                <div class="test-intro">
                    <h2>Đánh giá sức khỏe tinh thần</h2>
                    <p>Các bài kiểm tra dưới đây sẽ giúp bạn hiểu rõ hơn về tình trạng sức khỏe tinh thần của mình. Kết quả chỉ mang tính chất tham khảo và không thay thế cho chẩn đoán chuyên nghiệp.</p>
                </div>

                <div class="test-tabs">
                    <div class="test-tab active" data-tab="stress-test">Bài test stress</div>
                    <div class="test-tab" data-tab="anxiety-test">Bài test lo âu</div>
                </div>

                <div id="stress-test" class="test-content active">
                    <div class="progress-container">
                        <div class="progress-bar" id="stress-progress"></div>
                    </div>
                    <form class="test-form" id="stress-form">
                        <div class="question" data-question="1">
                            <h3>1. Trong tháng qua, bạn có thường xuyên cảm thấy không thể kiểm soát những điều quan trọng trong cuộc sống của mình?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không bao giờ</div>
                                <div class="option" data-value="1">Hiếm khi</div>
                                <div class="option" data-value="2">Đôi khi</div>
                                <div class="option" data-value="3">Khá thường xuyên</div>
                                <div class="option" data-value="4">Rất thường xuyên</div>
                            </div>
                        </div>
                        <div class="question" data-question="2">
                            <h3>2. Trong tháng qua, bạn có cảm thấy tự tin về khả năng xử lý vấn đề cá nhân của mình?</h3>
                            <div class="options">
                                <div class="option" data-value="4">Không bao giờ</div>
                                <div class="option" data-value="3">Hiếm khi</div>
                                <div class="option" data-value="2">Đôi khi</div>
                                <div class="option" data-value="1">Khá thường xuyên</div>
                                <div class="option" data-value="0">Rất thường xuyên</div>
                            </div>
                        </div>
                        <div class="question" data-question="3">
                            <h3>3. Trong tháng qua, bạn có thường xuyên cảm thấy mọi thứ đang diễn ra theo ý muốn của mình?</h3>
                            <div class="options">
                                <div class="option" data-value="4">Không bao giờ</div>
                                <div class="option" data-value="3">Hiếm khi</div>
                                <div class="option" data-value="2">Đôi khi</div>
                                <div class="option" data-value="1">Khá thường xuyên</div>
                                <div class="option" data-value="0">Rất thường xuyên</div>
                            </div>
                        </div>
                        <div class="question" data-question="4">
                            <h3>4. Trong tháng qua, bạn có thường xuyên cảm thấy khó khăn chồng chất đến mức không thể vượt qua?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không bao giờ</div>
                                <div class="option" data-value="1">Hiếm khi</div>
                                <div class="option" data-value="2">Đôi khi</div>
                                <div class="option" data-value="3">Khá thường xuyên</div>
                                <div class="option" data-value="4">Rất thường xuyên</div>
                            </div>
                        </div>
                        <div class="question" data-question="5">
                            <h3>5. Trong tháng qua, bạn có thường xuyên cảm thấy mất ngủ hoặc khó ngủ vì lo lắng?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không bao giờ</div>
                                <div class="option" data-value="1">Hiếm khi</div>
                                <div class="option" data-value="2">Đôi khi</div>
                                <div class="option" data-value="3">Khá thường xuyên</div>
                                <div class="option" data-value="4">Rất thường xuyên</div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary submit-btn" id="stress-submit">Xem kết quả</button>
                    </form>
                </div>

                <div id="anxiety-test" class="test-content">
                    <div class="progress-container">
                        <div class="progress-bar" id="anxiety-progress"></div>
                    </div>
                    <form class="test-form" id="anxiety-form">
                        <div class="question" data-question="1">
                            <h3>1. Trong hai tuần qua, bạn có thường xuyên cảm thấy lo lắng, căng thẳng hoặc bồn chồn?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <div class="question" data-question="2">
                            <h3>2. Trong hai tuần qua, bạn có thường xuyên không thể ngừng lo lắng hoặc kiểm soát sự lo lắng?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <div class="question" data-question="3">
                            <h3>3. Trong hai tuần qua, bạn có thường xuyên lo lắng quá mức về nhiều thứ khác nhau?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <div class="question" data-question="4">
                            <h3>4. Trong hai tuần qua, bạn có thường xuyên khó thư giãn?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <div class="question" data-question="5">
                            <h3>5. Trong hai tuần qua, bạn có thường xuyên bồn chồn đến mức khó có thể ngồi yên?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <div class="question" data-question="6">
                            <h3>6. Trong hai tuần qua, bạn có thường xuyên dễ cáu kỉnh hoặc khó chịu?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <div class="question" data-question="7">
                            <h3>7. Trong hai tuần qua, bạn có thường xuyên cảm thấy sợ hãi như thể điều gì đó khủng khiếp có thể xảy ra?</h3>
                            <div class="options">
                                <div class="option" data-value="0">Không hề</div>
                                <div class="option" data-value="1">Vài ngày</div>
                                <div class="option" data-value="2">Hơn nửa số ngày</div>
                                <div class="option" data-value="3">Hầu như mỗi ngày</div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-primary submit-btn" id="anxiety-submit">Xem kết quả</button>
                    </form>
                </div>
            </section>

            <section id="results" class="results">
                <div class="result-summary">
                    <h2>Kết quả đánh giá của bạn</h2>
                    <p class="result-description">Dưới đây là kết quả đánh giá dựa trên câu trả lời của bạn.</p>
                </div>
                <div class="result-details">
                    <div class="result-card stress-result">
                        <h3><i class="fas fa-chart-line"></i> Mức độ stress</h3>
                        <p class="stress-score"></p>
                        <p class="stress-interpretation"></p>
                    </div>
                    <div class="result-card anxiety-result">
                        <h3><i class="fas fa-heartbeat"></i> Mức độ lo âu</h3>
                        <p class="anxiety-score"></p>
                        <p class="anxiety-interpretation"></p>
                    </div>
                </div>
                <div class="resource-suggestions">
                    <h3>Gợi ý tài nguyên cho bạn</h3>
                    <p>Dựa trên kết quả đánh giá, chúng tôi gợi ý những tài nguyên sau có thể hữu ích cho bạn:</p>
                    <div class="resource-list">
                        <div class="resource-item">
                            <h4>Các bài tập thở sâu</h4>
                            <p>Học các kỹ thuật thở sâu để giảm lo âu và căng thẳng tức thì.</p>
                            <a href="../pages/resources.html#tips" class="btn btn-outlined">Xem ngay</a>
                        </div>
                        <div class="resource-item">
                            <h4>Thiền chánh niệm</h4>
                            <p>Thực hành thiền chánh niệm để cải thiện khả năng kiểm soát suy nghĩ và cảm xúc.</p>
                            <a href="../pages/resources.html#maintain" class="btn btn-outlined">Xem ngay</a>
                        </div>
                        <div class="resource-item">
                            <h4>Câu chuyện từ người đồng cảnh</h4>
                            <p>Đọc câu chuyện của những người đã vượt qua khó khăn tương tự.</p>
                            <a href="../pages/resources.html#stories" class="btn btn-outlined">Xem ngay</a>
                        </div>
                        <div class="resource-item">
                            <h4>Trò chuyện với chuyên gia</h4>
                            <p>Kết nối với chuyên gia tâm lý để được tư vấn chuyên sâu.</p>
                            <a href="../pages/experts.html" class="btn btn-outlined">Xem ngay</a>
                        </div>
                    </div>
                </div>
                <div class="disclaimer">
                    <p><strong>Lưu ý:</strong> Kết quả này chỉ có tính chất tham khảo và không thay thế cho tư vấn, chẩn đoán hoặc điều trị y tế chuyên nghiệp. Nếu bạn đang gặp khó khăn nghiêm trọng, vui lòng liên hệ với chuyên gia sức khỏe tâm thần.</p>
                </div>
            </section>
        </main>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-logo">
                <h2>Mindspace</h2>
                <p>Không gian an toàn để nuôi dưỡng và chữa lành tâm hồn của bạn</p>
            </div>
            <div class="footer-links">
                <h3>Liên kết nhanh</h3>
                <ul>
                    <li><a href="../index.html">Trang chủ</a></li>
                    <li><a href="mental-check.html">Kiểm tra tâm trạng</a></li>
                    <li><a href="confession.html">Góc chia sẻ</a></li>
                    <li><a href="experts.html">Góc chuyên gia</a></li>
                    <li><a href="resources.html">Thư viện tài nguyên</a></li>
                    <li><a href="chatbot.html">Chatbot hỗ trợ</a></li>
                    <li><a href="contact.html">Liên hệ & hỗ trợ</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h3>Liên hệ</h3>
                <p><i class="fas fa-phone"></i> Hotline: 1800-xxxx-xxxx</p>
                <p><i class="fas fa-envelope"></i> Email: support@mindspace.vn</p>
                <div class="social-media">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Mindspace. Tất cả quyền được bảo lưu.</p>
        </div>
    </footer>

    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab switching functionality
            const tabs = document.querySelectorAll('.test-tab');
            const testContents = document.querySelectorAll('.test-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    testContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    const contentId = tab.getAttribute('data-tab');
                    document.getElementById(contentId).classList.add('active');
                });
            });
            
            // Option selection functionality
            const options = document.querySelectorAll('.option');
            
            options.forEach(option => {
                option.addEventListener('click', () => {
                    // Remove selected class from all options in the same question
                    const question = option.closest('.question');
                    const questionOptions = question.querySelectorAll('.option');
                    questionOptions.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    option.classList.add('selected');
                    
                    // Update progress bar
                    updateProgress();
                });
            });
            
            // Progress bar update
            function updateProgress() {
                const activeTest = document.querySelector('.test-content.active');
                const testId = activeTest.id;
                const totalQuestions = activeTest.querySelectorAll('.question').length;
                const answeredQuestions = activeTest.querySelectorAll('.option.selected').length;
                const progress = (answeredQuestions / totalQuestions) * 100;
                
                document.getElementById(`${testId}-progress`).style.width = `${progress}%`;
            }
            
            // Submit functionality
            document.getElementById('stress-submit').addEventListener('click', function() {
                submitTest('stress');
            });
            
            document.getElementById('anxiety-submit').addEventListener('click', function() {
                submitTest('anxiety');
            });
            
            function submitTest(testType) {
                // Validate that all questions have been answered
                const testForm = document.getElementById(`${testType}-form`);
                const questions = testForm.querySelectorAll('.question');
                let allAnswered = true;
                
                questions.forEach(question => {
                    if (!question.querySelector('.option.selected')) {
                        allAnswered = false;
                        question.style.borderBottom = '2px solid #ff6b6b';
                        setTimeout(() => {
                            question.style.borderBottom = '1px solid var(--border-color)';
                        }, 3000);
                    }
                });
                
                if (!allAnswered) {
                    alert('Vui lòng trả lời tất cả các câu hỏi trước khi xem kết quả.');
                    return;
                }
                
                // Calculate score
                let score = 0;
                const selectedOptions = testForm.querySelectorAll('.option.selected');
                
                selectedOptions.forEach(option => {
                    score += parseInt(option.getAttribute('data-value'));
                });
                
                // Display results
                const resultsSection = document.querySelector('.results');
                resultsSection.style.display = 'block';
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
                
                // Update appropriate result card
                if (testType === 'stress') {
                    const stressScore = document.querySelector('.stress-score');
                    const stressInterpretation = document.querySelector('.stress-interpretation');
                    
                    stressScore.textContent = `Điểm: ${score}/20`;
                    
                    if (score <= 5) {
                        stressInterpretation.textContent = 'Mức độ stress thấp. Bạn đang quản lý stress rất tốt.';
                    } else if (score <= 10) {
                        stressInterpretation.textContent = 'Mức độ stress trung bình. Bạn có thể cần thêm một số kỹ thuật thư giãn.';
                    } else if (score <= 15) {
                        stressInterpretation.textContent = 'Mức độ stress cao. Bạn nên dành thời gian để chăm sóc sức khỏe tinh thần.';
                    } else {
                        stressInterpretation.textContent = 'Mức độ stress rất cao. Khuyến nghị tìm kiếm hỗ trợ từ chuyên gia.';
                    }
                } else if (testType === 'anxiety') {
                    const anxietyScore = document.querySelector('.anxiety-score');
                    const anxietyInterpretation = document.querySelector('.anxiety-interpretation');
                    
                    anxietyScore.textContent = `Điểm: ${score}/21`;
                    
                    if (score <= 4) {
                        anxietyInterpretation.textContent = 'Mức độ lo âu tối thiểu. Bạn đang quản lý lo âu rất tốt.';
                    } else if (score <= 9) {
                        anxietyInterpretation.textContent = 'Mức độ lo âu nhẹ. Bạn có thể thực hành thêm các kỹ thuật thư giãn.';
                    } else if (score <= 14) {
                        anxietyInterpretation.textContent = 'Mức độ lo âu trung bình. Bạn nên xem xét các chiến lược đối phó với lo âu.';
                    } else {
                        anxietyInterpretation.textContent = 'Mức độ lo âu nghiêm trọng. Khuyến nghị tìm kiếm hỗ trợ từ chuyên gia.';
                    }
                }
            }
        });
    </script>
</body>
</html>
